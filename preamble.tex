% title of the dissertation
\def\distitle{Novel Methods in Optical and Mechanical Biosensors}
% \def\distitle{Neue Methoden in optischer und mechanischer ...
\usepackage{mathtools}
\usepackage{t1enc}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[normalem]{ulem}
\usepackage{import}
\usepackage{paralist}
\usepackage[version=3]{mhchem}
\usepackage{wrapfig}
\usepackage{pifont}
\usepackage[german, USenglish]{babel}
\usepackage{mathrsfs}
\usepackage{xcolor}
%\usepackage[cmyk]{xcolor}
%\usepackage{kpfonts}
\usepackage{enumitem}
\usepackage{datetime}
\usepackage{fullpage}
\usepackage{attachfile}
\usepackage{textpos}
\usepackage{rotating}
\usepackage{ifthen}
\usepackage[parfill]{parskip}
%\usepackage[inline]{showlabels}
\usepackage{subcaption}
\usepackage{amsmath, amsthm, amssymb, amsfonts}
\usepackage{relsize}
\usepackage{tabularx}
\usepackage{booktabs}
%\usepackage[toc,page]{appendix}
\usepackage[acronym,xindy]{glossaries}
\newacronym{spr}{SPR}{surface plasmon resonance}
\newacronym{spp}{SPP}{surface plasmon polariton}
\newacronym{lrspp}{LRSPP}{long range surface plasmon polariton}
\newacronym{spom}{SPOM}{scanning plasmon optical microscopy}
\newacronym{atr}{ATR}{attenuated total reflection}
\newacronym{qcm}{QCM}{quartz crystal microbalance}


\usepackage{hyperref}
\hypersetup{%
 colorlinks=false,
 hidelinks=true,
 pdfauthor={Aaron Webster},
 pageanchor=false,
}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{units}
\usepgfplotslibrary{external}
\pgfplotsset{filter discard warning=false}

\usepackage[siunitx]{circuitikz}
\usepackage{pgf,tikz}
\usetikzlibrary{calc}
\usetikzlibrary{patterns,decorations.pathmorphing,decorations.markings,positioning}
\usetikzlibrary{pgfplots.units}
\usetikzlibrary{pgfplots.external}
\usetikzlibrary{pgfplots.groupplots}
\usetikzlibrary{arrows}
\usetikzlibrary{plotmarks}

% Externalize tikz.
\tikzexternalize[prefix=external/]

% Custom colors.
\import{colors/}{colors}

% siunitx
\usepackage{siunitx}
\sisetup{%
binary-units,
per-mode=reciprocal,
% load-configurations=abbreviations
% round-mode = places,
}%

\DeclareSIUnit\molar{\mole\per\cubic\deci\metre}
\DeclareSIUnit\Molar{\textsc{m}}
\DeclareSIUnit\torr{torr}
\DeclareSIUnit\particle{particle}
\DeclareSIUnit\g{g}

% Prettify chapter/section format.
\usepackage{titlesec}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray}{|}\hsp}{0pt}{\Huge\bfseries}

% Reset chapter numbers at the parts.
\makeatletter
\@addtoreset{chapter}{part}
\makeatother

% Insert an unnumbered chapter.
\newcommand{\silentchapter}[1]{%
 \setcounter{chapter}{0}
 \setcounter{section}{0}
 \chapter*{#1}
 \addcontentsline{toc}{chapter}{#1}
}

% New definition of square root.  Renames \sqrt as \oldsqrt This definition
% puts a little vertical guy at the end so it's more obvious where the square
% root actually ends.
\let\oldsqrt\sqrt
% it defines the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}
\def\DHLhksqrt#1#2{%
\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
\advance\dimen0-0.2\ht0
\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
{\box0\lower0.4pt\box2}}

% Integrals with infinity bounds.
\newcommand{\intinfty}{\int_{-\infty}^{\infty}}

% Consistent formatting of object labels.
\newcommand{\Figure}[1]{Figure~\ref{#1}}
\newcommand{\Equation}[1]{Equation~\ref{#1}}
\newcommand{\Table}[1]{Table~\ref{#1}}
\newcommand{\Section}[1]{Section~\ref{#1}}
\newcommand{\Chapter}[1]{Chapter~\ref{#1}}
\newcommand{\Part}[1]{Part~\ref{#1}}
\newcommand{\Appendix}[1]{Appendix~\ref{#1}}

% I want all of the document numbering to always show the full path.
%\renewcommand\thechapter{\Roman{part}.\arabic{chapter}}
%\renewcommand\thesection{\Roman{part}.\Alph{chapter}.\arabic{section}}
%\renewcommand\thesubsection{\arabic{section}.\arabic{subsection}}
%\renewcommand\thesubsubsection{\arabic{subsection}.\arabic{subsubsection}}

%\renewcommand\thefigure{S\arabic{figure}}
%\renewcommand\thesection{\Roman{part}.\arabic{chapter}.\arabic{section}}
%\renewcommand\thetable{S\arabic{table}}

% Names have a particular formatting.
\newcommand{\name}[1]{\textsc{#1}}

% Missing mathematical operators.
\DeclareMathOperator{\sinc}{sinc}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\erf}{erf}
\DeclareMathOperator{\inverf}{inverf}
\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\arctanh}{arctanh}
%\DeclareMathOperator{\Re}{Re}
%\DeclareMathOperator{\Im}{Im}

% Use roman type for natural base e and sqrt(-1).
\newcommand{\me}{{\mathrm{e}}}
\newcommand{\mi}{{\mathrm{i}}}

% Roman type for the derivative, plus a space.
\newcommand{\md}{\,\mathrm{d}}

% Fourier transform and the reverse.
\newcommand{\ff}[1]{{\mathscr{F}^{+}\bigl(#1\bigr)}}
\newcommand{\fr}[1]{{\mathscr{F}^{-}\bigl(#1\bigr)}}

% Hilbert transform and the reverse.
\newcommand{\hf}[1]{{\mathscr{H}^{+}\bigl(#1\bigr)}}
\newcommand{\hr}[1]{{\mathscr{H}^{-}\bigl(#1\bigr)}}

% QCM related frequency and bandwidth shifts.
\newcommand{\df}{\Delta\!f}
\newcommand{\dg}{\Delta\Gamma}
\newcommand{\xil}{\xi_\mathrm{L}}
\newcommand{\kl}{k_\mathrm{L}}
\newcommand{\ml}{m_\mathrm{L}}
\newcommand{\kq}{k_\mathrm{q}}
\newcommand{\mq}{m_\mathrm{q}}
\newcommand{\Rm}{R_\mathrm{m}}
\newcommand{\Ac}{A_\mathrm{c}}
\newcommand{\Lm}{L_\mathrm{m}}
\newcommand{\omegaq}{\omega_\mathrm{q}}
\newcommand{\thetasp}{\theta_\mathrm{sp}}
\newcommand{\ksp}{k_\mathrm{sp}}
\newcommand{\comsol}{\texttt{COMSOL}}

\newcommand{\ersatzfigure}{\includegraphics[width=10cm,keepaspectratio]{includes/ersatz}}

% hilight text... a "work in progress" type thing
%\tikzstyle{todobox} = [draw=Blues9seq9, fill=Blues9seq1,
%rectangle, rounded corners, inner sep=10pt, inner ysep=20pt]
%\tikzstyle{todotitle} =[fill=Blues9seq9, text=white]

\newcommand{\todo}[1]{%
\begin{center}
%\begin{tikzpicture}
%\node [todobox] (box){%
 \begin{minipage}{0.9\textwidth}
 #1
 \end{minipage}
%};
%\node[todotitle, right=10pt] at (box.north west) {Note};
%\end{tikzpicture}
\end{center}
}
\makeatletter
\def\tensor#1{\protect\@ontopof{#1}{\leftrightarrow}{1.15}\mathord{\box2}}
\def\overstar#1{\protect\@ontopof{#1}{\ast}{1.15}\mathord{\box2}}
\def\overdots#1{\protect\@ontopof{#1}{\cdots}{1.0}\mathord{\box2}}
\def\overcirc#1{\protect\@ontopof{#1}{\circ}{1.2}\mathord{\box2}}
\def\loarrow#1{\protect\@ontopof{#1}{\leftarrow}{1.15}\mathord{\box2}}
\def\roarrow#1{\protect\@ontopof{#1}{\rightarrow}{1.15}\mathord{\box2}}

\def\@ontopof#1#2#3{%
{\mathchoice
{\@@ontopof{#1}{#2}{#3}\displaystyle\scriptstyle}%
{\@@ontopof{#1}{#2}{#3}\textstyle\scriptstyle}%
{\@@ontopof{#1}{#2}{#3}\scriptstyle\scriptscriptstyle}%
{\@@ontopof{#1}{#2}{#3}\scriptscriptstyle\scriptscriptstyle}%
}}
\def\@@ontopof#1#2#3#4#5{%
\setbox0=\hbox{$#4#1$}%
\setbox1=\hbox{$#5#2$}%
\setbox2=\hbox{}\ht2=\ht0 \dp2=\dp0 %
\ifdim\wd0>\wd1 %
\setbox1=\hbox to\wd0{\hss\box1\hss}%
\mathord{\rlap{\raise#3\ht0\box1}\box0}%
\else   %
\setbox1=\hbox to.9\wd1{\hss\box1\hss}%
\setbox0=\hbox to\wd1{\hss$#4\relax#1$\hss}%
\mathord{\rlap{\copy0}\raise#3\ht0\box1}%
\fi
}

\def\lambdabar{\protect\@lambdabar}
\def\@lambdabar{%
\relax
\bgroup
\def\@tempa{\hbox{\raise.73\ht0
\hbox to0pt{\kern.25\wd0\vrule width.5\wd0
height.1pt depth.1pt\hss}\box0}}%
\mathchoice{\setbox0\hbox{$\displaystyle\lambda$}\@tempa}%
{\setbox0\hbox{$\textstyle\lambda$}\@tempa}%
{\setbox0\hbox{$\scriptstyle\lambda$}\@tempa}%
{\setbox0\hbox{$\scriptscriptstyle\lambda$}\@tempa}%
\egroup
}
\makeatother
%\def\shrinkage{2.1mu}
%\def\vecsign{\mathchar"017E}
%\def\vecsign{\mathchar"3221}
%\def\dvecsign{\smash{\stackon[-2.60pt]{\mkern-\shrinkage\vecsign}{\rotatebox{180}{$\mkern-\shrinkage\vecsign$}}}}
%\def\tensor#1{\def\useanchorwidth{T}\stackon[-4.2pt]{#1}{\,\dvecsign}}
%\usepackage{stackengine}
%\stackMath
%\newcommand{\tensor}[1]{\stackrel{\leftrightarrow}{#1}}
